# Ceph 设计原理与实现

## 第一章 计算为王 - 基于可扩展的受控副本分部署策略CRUSH

将数据打散并以某一哈希策略完全随机分布至存储设备时在实际应用中会遇到两个**问题**：

- 系统中的存储设备数量发生变化，如何最小化数据迁移量从而使系统尽快恢复平衡？

- 在大型（PB级及以上）分布式存储系统中，数据一般包括多个备份，如何合理分布这些备份从而尽可能的使得数据具有较高的可靠性？

Ceph 设计出称之为CRUSH的策略来解决以上问题。

**CRUSH是一种基于哈希的数据分布算法。**

数据唯一标志符---------+
                       |  输入             输出
当前存储集群的拓扑结构-| =====> CRUSH算法 =====> 底层存储设备位置
                       |
数据备份策略-----------+

避免查表，实现去中心化，高并发。 CRUSH同时支持多种数据备份策略，如：镜像，RAID，纠删码。

**上述特性使得CRUSH特别适用于对可扩展性，性能，可靠性都有极高要求的大型分布式存储系统。**

### 1.1 straw及straw2算法简介

### 1.2 CURSH算法详解
